# See https://github.com/mastodon/chart/blob/main/values.yaml

ingress:
  enabled: true
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod
    kubernetes.io/ingress.class: nginx
    nginx.ingress.kubernetes.io/proxy-body-size: 40m
  hosts:
    - host: mastodon.k8s.brigade.cloud
      paths:
        - path: '/'
  tls:
    - secretName: mastodon-tls
      hosts:
        - mastodon.k8s.brigade.cloud

mastodon:
  # -- create an initial administrator user; the password is autogenerated and will
  # have to be reset
  createAdmin:
    enabled: true
    username: chris
    email: chris@codeforphilly.org

  secrets:
    # TODO: define existingSecret instead
    secret_key_base: dummy-secret_key_base
    otp_secret: dummy-otp_secret
    vapid:
      private_key: dummy-vapid-private_key
      public_key: dummy-vapid-public_key

redis:
  replica:
    replicaCount: 1

elasticsearch:
  master:
    replicaCount: 1
  data:
    replicaCount: 1
  coordinating:
    replicaCount: 1
  ingest:
    replicaCount: 1
